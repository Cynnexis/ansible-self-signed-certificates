---
- hosts: localhost
  remote_user: root
  vars:
    self_signed_certs_dir: /opt/ansible-self-signed-certificates-tests
    self_signed_owner: root
    self_signed_group: root
    self_signed_mode: 0660
    self_signed_verify: true

    # Information about the maintainer of the certificates
    self_signed_default_common_name: 'example.com'
    self_signed_default_email_address: 'john.doe@example.com'
    self_signed_default_country_name: 'France'
    self_signed_default_state_or_province_name: 'ÃŽle-de-France'
    self_signed_default_locality_name: 'Paris'
    self_signed_default_organization_name: 'None Inc.'
    self_signed_default_organizational_unit_name: 'Testing Department'
    self_signed_default_cert_validity: +3650d
    #self_signed_default_private_key_type: ''
    #self_signed_default_private_key_size: 0

    # CA configuration
    #self_signed_ca_common_name: ''
    #self_signed_ca_email_address: ''
    #self_signed_ca_country_name: ''
    #self_signed_ca_state_or_province_name: ''
    #self_signed_ca_locality_name: ''
    #self_signed_ca_organization_name: ''
    #self_signed_ca_organizational_unit_name: ''
    #self_signed_ca_cert_validity: +3650d # 10 years
    #self_signed_ca_owner: ''
    #self_signed_ca_group: ''
    self_signed_ca_mode: 0664
    #self_signed_ca_private_key_type: ''
    #self_signed_ca_private_key_size: 0
    self_signed_ca_subject_alt_name:
     - 'DNS:example.com'
     - 'DNS:*.example.com'

    # Server/client configuration
    self_signed_certificates:
      - name: 'example'
        #common_name: ''
        #email_address: ''
        #country_name: ''
        #state_or_province_name: ''
        #locality_name: ''
        #organization_name: ''
        #organizational_unit_name: ''
        #cert_validity: +3650d # 10 years
        #owner: ''
        #group: ''
        #mode: 0
        #private_key_type: ''
        #private_key_size: 0
        subject_alt_name:
          - 'DNS:example.com'
          - 'DNS:*.example.com'

      - name: 'example2'
        #common_name: ''
        #email_address: ''
        #country_name: ''
        #state_or_province_name: ''
        #locality_name: ''
        #organization_name: ''
        #organizational_unit_name: ''
        #cert_validity: +3650d # 10 years
        #owner: ''
        #group: ''
        #mode: 0
        #private_key_type: ''
        #private_key_size: 0
        subject_alt_name:
          - 'DNS:example2.com'
          - 'DNS:*.example2.com'
  roles:
    - role: ansible-self-signed-certificates
